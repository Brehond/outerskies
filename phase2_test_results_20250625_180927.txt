üöÄ Starting Phase 2 Monitoring & Observability Tests
============================================================
‚úÖ HealthCheckResult Creation: PASS
   Details: {'response_time': 0.5}
‚úÖ Database Health Check: PASS
   Details: {'status': 'healthy', 'response_time': 0.0}
‚úÖ Redis Health Check: PASS
   Details: {'status': 'healthy', 'response_time': 0.02877521514892578}
‚úÖ Comprehensive Health Check: PASS
   Details: {'overall_status': 'unhealthy', 'total_checks': 8}
‚úÖ Performance Monitor: PASS
   Details: {'cache_hits': 1, 'cache_misses': 1}
‚úÖ get_system_health Function: PASS
   Details: {'overall_status': 'unhealthy'}
‚úÖ get_quick_health_status Function: PASS
   Details: {'status': 'healthy'}
‚úÖ Performance Functions: PASS
   Details: {'period_minutes': 60}
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: Error 503 on /api/v1/system/health/
From: noreply@outerskies.com
To: admin@example.com
Date: Wed, 25 Jun 2025 21:09:34 -0000
Message-ID: <175088577476.10056.6433147357499018105@DESKTOP-SUFT37C.home>

{
  "status_code": 503,
  "path": "/api/v1/system/health/",
  "method": "GET",
  "client_ip": "127.0.0.1",
  "user_agent": null,
  "timestamp": 1750885774.7656574
}
-------------------------------------------------------------------------------
‚úÖ Health API Endpoint: PASS
   Details: {'status_code': 503, 'api_status': 'error'}
‚úÖ Quick Health API Endpoint: PASS
   Details: {'status_code': 400, 'security_feature': 'signature_required'}
‚úÖ Performance API Endpoint: PASS
   Details: {'status_code': 400, 'security_feature': 'signature_required'}
‚úÖ API Endpoints: PASS
   Details: {'all_endpoints_tested': True}
‚ùå Admin Dashboard Access: FAIL
   Error: Expected 200, got 302, content: b''
Traceback (most recent call last):
  File "C:\Users\trueb\outer-skies\test_phase2_monitoring.py", line 299, in test_admin_dashboard_access
    assert response.status_code == 200, f"Expected 200, got {response.status_code}, content: {response.content}"
AssertionError: Expected 200, got 302, content: b''

‚úÖ Middleware Integration: PASS
   Details: {'middleware_in_chain': True}
‚úÖ Logging and Alerting: PASS
   Details: {'monitoring_active': True, 'overall_status': 'unhealthy'}
‚úÖ Cache Integration: PASS
   Details: {'set_operation': True, 'get_operation': True, 'delete_operation': True}
‚úÖ Database Integration: PASS
   Details: {'query_executed': True, 'result_count': 55}
‚úÖ Error Handling - Invalid Metric Value: PASS

============================================================
üìä PHASE 2 TEST RESULTS SUMMARY
============================================================
Total Tests: 18
Passed: 17 ‚úÖ
Failed: 1 ‚ùå
Success Rate: 94.4%
Test Duration: 10.79 seconds

‚ùå FAILED TESTS:
  - Admin Dashboard Access: Expected 200, got 302, content: b''

============================================================
DETAILED TEST RESULTS
============================================================

Test: HealthCheckResult Creation
Status: PASS
Timestamp: 2025-06-25T21:09:27.366967+00:00
Details: {
  "response_time": 0.5
}
----------------------------------------

Test: Database Health Check
Status: PASS
Timestamp: 2025-06-25T21:09:27.366967+00:00
Details: {
  "status": "healthy",
  "response_time": 0.0
}
----------------------------------------

Test: Redis Health Check
Status: PASS
Timestamp: 2025-06-25T21:09:27.395743+00:00
Details: {
  "status": "healthy",
  "response_time": 0.02877521514892578
}
----------------------------------------

Test: Comprehensive Health Check
Status: PASS
Timestamp: 2025-06-25T21:09:29.676323+00:00
Details: {
  "overall_status": "unhealthy",
  "total_checks": 8
}
----------------------------------------

Test: Performance Monitor
Status: PASS
Timestamp: 2025-06-25T21:09:29.678302+00:00
Details: {
  "cache_hits": 1,
  "cache_misses": 1
}
----------------------------------------

Test: get_system_health Function
Status: PASS
Timestamp: 2025-06-25T21:09:32.332671+00:00
Details: {
  "overall_status": "unhealthy"
}
----------------------------------------

Test: get_quick_health_status Function
Status: PASS
Timestamp: 2025-06-25T21:09:32.334704+00:00
Details: {
  "status": "healthy"
}
----------------------------------------

Test: Performance Functions
Status: PASS
Timestamp: 2025-06-25T21:09:32.335700+00:00
Details: {
  "period_minutes": 60
}
----------------------------------------

Test: Health API Endpoint
Status: PASS
Timestamp: 2025-06-25T21:09:34.785906+00:00
Details: {
  "status_code": 503,
  "api_status": "error"
}
----------------------------------------

Test: Quick Health API Endpoint
Status: PASS
Timestamp: 2025-06-25T21:09:34.789062+00:00
Details: {
  "status_code": 400,
  "security_feature": "signature_required"
}
----------------------------------------

Test: Performance API Endpoint
Status: PASS
Timestamp: 2025-06-25T21:09:34.792060+00:00
Details: {
  "status_code": 400,
  "security_feature": "signature_required"
}
----------------------------------------

Test: API Endpoints
Status: PASS
Timestamp: 2025-06-25T21:09:34.792060+00:00
Details: {
  "all_endpoints_tested": true
}
----------------------------------------

Test: Admin Dashboard Access
Status: FAIL
Timestamp: 2025-06-25T21:09:35.090992+00:00
Error: Expected 200, got 302, content: b''
----------------------------------------

Test: Middleware Integration
Status: PASS
Timestamp: 2025-06-25T21:09:35.429214+00:00
Details: {
  "middleware_in_chain": true
}
----------------------------------------

Test: Logging and Alerting
Status: PASS
Timestamp: 2025-06-25T21:09:38.148467+00:00
Details: {
  "monitoring_active": true,
  "overall_status": "unhealthy"
}
----------------------------------------

Test: Cache Integration
Status: PASS
Timestamp: 2025-06-25T21:09:38.149468+00:00
Details: {
  "set_operation": true,
  "get_operation": true,
  "delete_operation": true
}
----------------------------------------

Test: Database Integration
Status: PASS
Timestamp: 2025-06-25T21:09:38.149468+00:00
Details: {
  "query_executed": true,
  "result_count": 55
}
----------------------------------------

Test: Error Handling - Invalid Metric Value
Status: PASS
Timestamp: 2025-06-25T21:09:38.150466+00:00
----------------------------------------

SUMMARY:
Total Tests: 18
Passed: 17
Failed: 1
Success Rate: 94.4%
Duration: 10.79 seconds
