=== OUTER SKIES API TEST LOG ===
Started: 2025-06-24 21:06:02
API Secret: test-api-secret-for-testing
API Key: test-api-key-for-testing
Base URL: http://localhost:8000

[2025-06-24 21:06:02] === OUTER SKIES COMPREHENSIVE API TEST ===
[2025-06-24 21:06:02] Starting comprehensive API testing...
[2025-06-24 21:06:02] 
=== TESTING SYSTEM HEALTH ===
[2025-06-24 21:06:02] Method: GET
[2025-06-24 21:06:02] Path: /api/v1/system/health/
[2025-06-24 21:06:02] Generated headers for GET /api/v1/system/health/:
[2025-06-24 21:06:02]   Timestamp: 1750809962
[2025-06-24 21:06:02]   Nonce: IyhdXJZVV9W4
[2025-06-24 21:06:02]   Body: empty
[2025-06-24 21:06:02]   Signature: 068b0fae4b1439b37cb53f8fa30b44b4a1b58e55b50d5a82cf75ce1a4b2fce83
[2025-06-24 21:06:04] Response Status: 200
[2025-06-24 21:06:04] Response Headers: {'Date': 'Wed, 25 Jun 2025 00:06:04 GMT', 'Server': 'WSGIServer/0.2 CPython/3.11.0', 'Content-Type': 'application/json', 'Vary': 'Accept, Cookie', 'Allow': 'GET, HEAD, OPTIONS', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'DENY', 'X-XSS-Protection': '1; mode=block', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Content-Length': '143', 'Referrer-Policy': 'same-origin', 'Cross-Origin-Opener-Policy': 'same-origin'}
[2025-06-24 21:06:04] Response Body: {
  "status": "success",
  "message": "System is healthy",
  "data": {
    "timestamp": "2025-06-25T00:06:04.899088+00:00",
    "status": "healthy",
    "version": "1.0.0"
  }
}
[2025-06-24 21:06:04] ✅ System Health TEST PASSED
[2025-06-24 21:06:04] 
=== TESTING CELERY HEALTH ===
[2025-06-24 21:06:04] Method: GET
[2025-06-24 21:06:04] Path: /api/v1/system/celery_health/
[2025-06-24 21:06:04] Generated headers for GET /api/v1/system/celery_health/:
[2025-06-24 21:06:04]   Timestamp: 1750809964
[2025-06-24 21:06:04]   Nonce: 0mzBsTRzo4Iy
[2025-06-24 21:06:04]   Body: empty
[2025-06-24 21:06:04]   Signature: 51abb7ac11622e1b26fa7616a092849b4a732ec6119df80b9fd67b0a31ce4b80
[2025-06-24 21:06:13] Response Status: 200
[2025-06-24 21:06:13] Response Headers: {'Date': 'Wed, 25 Jun 2025 00:06:13 GMT', 'Server': 'WSGIServer/0.2 CPython/3.11.0', 'Content-Type': 'application/json', 'Vary': 'Accept, Cookie', 'Allow': 'GET, HEAD, OPTIONS', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'DENY', 'X-XSS-Protection': '1; mode=block', 'X-API-Current-Version': '1.0', 'X-API-Min-Version': '1.0', 'X-API-Max-Version': '2.0', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Content-Length': '236', 'Referrer-Policy': 'same-origin', 'Cross-Origin-Opener-Policy': 'same-origin'}
[2025-06-24 21:06:13] Response Body: {
  "status": "success",
  "message": "Celery health check completed. Status: healthy",
  "data": {
    "timestamp": "2025-06-25T00:06:06.979559+00:00",
    "celery_available": false,
    "redis_available": true,
    "database_available": true,
    "overall_status": "healthy"
  }
}
[2025-06-24 21:06:13] ✅ Celery Health TEST PASSED
[2025-06-24 21:06:13] 
=== TESTING BACKGROUND TASK ===
[2025-06-24 21:06:13] Method: POST
[2025-06-24 21:06:13] Path: /api/v1/background-charts/calculate_ephemeris/
[2025-06-24 21:06:13] Data: {
  "date": "1990-01-01",
  "time": "12:00",
  "latitude": 45.5,
  "longitude": -64.3,
  "timezone_str": "America/Halifax",
  "zodiac_type": "tropical",
  "house_system": "placidus"
}
[2025-06-24 21:06:13] Generated headers for POST /api/v1/background-charts/calculate_ephemeris/:
[2025-06-24 21:06:13]   Timestamp: 1750809973
[2025-06-24 21:06:13]   Nonce: 4aNWxJYR4pfv
[2025-06-24 21:06:13]   Body base64: eyJkYXRlIjoiMTk5MC0wMS0wMSIsInRpbWUiOiIxMjowMCIsIm...
[2025-06-24 21:06:13]   Signature: b02613086cec6fe30ab0879fefd53724b551e7ea532f35afafe50c4ab79b62a8
[2025-06-24 21:06:21] Response Status: 500
[2025-06-24 21:06:21] Response Headers: {'Date': 'Wed, 25 Jun 2025 00:06:21 GMT', 'Server': 'WSGIServer/0.2 CPython/3.11.0', 'Content-Type': 'application/json', 'Vary': 'Accept, Cookie', 'Allow': 'POST, OPTIONS', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'DENY', 'X-XSS-Protection': '1; mode=block', 'X-API-Current-Version': '1.0', 'X-API-Min-Version': '1.0', 'X-API-Max-Version': '2.0', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Content-Length': '65', 'Referrer-Policy': 'same-origin', 'Cross-Origin-Opener-Policy': 'same-origin'}
[2025-06-24 21:06:21] Response Body: {
  "error": "Task creation failed",
  "message": "Task creation failed"
}
[2025-06-24 21:06:21] ❌ Background Task TEST FAILED
[2025-06-24 21:06:21] 
=== FINAL TEST SUMMARY ===
[2025-06-24 21:06:21] System Health: ✅ PASS
[2025-06-24 21:06:21] Celery Health: ✅ PASS
[2025-06-24 21:06:21] Background Task: ❌ FAIL
[2025-06-24 21:06:21] Total Tests Passed: 2/3
[2025-06-24 21:06:21] ⚠️  MOST TESTS PASSED. Minor issues detected.
[2025-06-24 21:06:21] 
=== ANALYZING LOG FILE ===
[2025-06-24 21:06:21] Response counts:
[2025-06-24 21:06:21]   200 OK: 2
[2025-06-24 21:06:21]   400 Bad Request: 0
[2025-06-24 21:06:21]   401 Unauthorized: 0
[2025-06-24 21:06:21]   500 Server Error: 1
[2025-06-24 21:06:21] ✅ SUCCESS PATTERNS FOUND
[2025-06-24 21:06:21]    - Some tests are passing successfully
[2025-06-24 21:06:21] 
Detailed log saved to: test_output.txt
[2025-06-24 21:06:21] Test completed.
